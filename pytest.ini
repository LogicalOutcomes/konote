[pytest]
DJANGO_SETTINGS_MODULE = konote.settings.test
python_files = test_*.py
python_classes = *Test *Scenario *Workflow
python_functions = test_*

# Only look for tests in the tests/ directory
testpaths = tests

# Ignore directories that shouldn't be scanned for tests
norecursedirs =
    venv
    .venv
    apps
    konote
    static
    templates
    docs
    tasks
    .git
    __pycache__
    *.egg-info

# Markers
markers =
    browser: tests that need a real browser (Playwright + Chromium)
    scenario_eval: scenario-based QA evaluation tests (require holdout repo)
    slow: tests that are intentionally slow (e.g. bulk operations, key rotation)
    integration: tests that require external services (database, Redis, etc.)

# Enable verbose output by default
addopts = -v --tb=short -n auto

# Reuse database between tests for speed (Django creates tables once)
# Note: Each TestCase still gets a fresh transaction
